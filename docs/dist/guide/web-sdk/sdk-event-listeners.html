<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SDK Event Listeners | FunWallet Documentation</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/logo.svg">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="Welcome">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.64d71016.css" as="style"><link rel="preload" href="/assets/js/app.6922d332.js" as="script"><link rel="preload" href="/assets/js/2.df3542b2.js" as="script"><link rel="preload" href="/assets/js/18.362a932c.js" as="script"><link rel="preload" href="/assets/js/5.4c5a6809.js" as="script"><link rel="prefetch" href="/assets/js/10.6b28662a.js"><link rel="prefetch" href="/assets/js/11.c07b3369.js"><link rel="prefetch" href="/assets/js/12.0ff0b593.js"><link rel="prefetch" href="/assets/js/13.1052c4fc.js"><link rel="prefetch" href="/assets/js/14.0dedd9a7.js"><link rel="prefetch" href="/assets/js/15.9cb3daab.js"><link rel="prefetch" href="/assets/js/16.38025f3c.js"><link rel="prefetch" href="/assets/js/17.07dbe46f.js"><link rel="prefetch" href="/assets/js/19.7a32c01b.js"><link rel="prefetch" href="/assets/js/20.99b6f13c.js"><link rel="prefetch" href="/assets/js/21.7c7cb977.js"><link rel="prefetch" href="/assets/js/22.8a9b0de5.js"><link rel="prefetch" href="/assets/js/23.8147783c.js"><link rel="prefetch" href="/assets/js/3.0c702ba4.js"><link rel="prefetch" href="/assets/js/4.df916398.js"><link rel="prefetch" href="/assets/js/6.77c69655.js"><link rel="prefetch" href="/assets/js/7.cf304ae3.js"><link rel="prefetch" href="/assets/js/8.102080d5.js"><link rel="prefetch" href="/assets/js/9.8f1211be.js">
    <link rel="stylesheet" href="/assets/css/0.styles.64d71016.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.svg" alt="FunWallet Documentation" class="logo"> <span class="site-name can-hide">FunWallet Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div> <a href="https://github.com/funfair-tech/fun-wallet-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div> <a href="https://github.com/funfair-tech/fun-wallet-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Information</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/guide/information/getting-started.html" class="sidebar-link">Getting Started</a></li><li><a href="/guide/information/leader-and-follower.html" class="sidebar-link">Leader And Follower</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Web SDK</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/web-sdk/installing-sdk.html" class="sidebar-link">Installing FunWallet SDK</a></li><li><a href="/guide/web-sdk/setting-up-the-sdk-with-project.html" class="sidebar-link">Setting Up The SDK in your Project</a></li><li><a href="/guide/web-sdk/initialising-the-sdk.html" class="sidebar-link">Initialising the sdk</a></li><li><a href="/guide/web-sdk/authentication.html" class="sidebar-link">Authentication</a></li><li><a href="/guide/web-sdk/wallet-ui.html" class="sidebar-link">Show Wallet UI</a></li><li><a href="/guide/web-sdk/languages.html" class="sidebar-link">Languages</a></li><li><a href="/guide/web-sdk/approval-modal.html" class="sidebar-link">Approval Modals</a></li><li><a href="/guide/web-sdk/ethereum-provider.html" class="sidebar-link">Ethereum Provider</a></li><li><a href="/guide/web-sdk/sdk-methods.html" class="sidebar-link">SDK Methods</a></li><li><a href="/guide/web-sdk/sdk-event-listeners.html" aria-current="page" class="active sidebar-link">SDK Event Listeners</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#register-an-event-listener" class="sidebar-link">Register an event listener</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#listen-for-a-one-off-listener" class="sidebar-link">Listen for a one-off listener</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#security-concerns" class="sidebar-link">Security concerns</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#all-listeners" class="sidebar-link">All listeners</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#restoreauthenticationcompleted" class="sidebar-link">restoreAuthenticationCompleted</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#changenetwork" class="sidebar-link">changeNetwork</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#authenticationcompleted" class="sidebar-link">authenticationCompleted</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#followerauthenticationcompleted" class="sidebar-link">followerAuthenticationCompleted</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#walletinactivityloggedout" class="sidebar-link">walletInactivityLoggedOut</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#walletdevicedeletedloggedout" class="sidebar-link">walletDeviceDeletedLoggedOut</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#walletnonceupdated" class="sidebar-link">walletNonceUpdated</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#pendingtransaction" class="sidebar-link">pendingTransaction</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#completedtransaction" class="sidebar-link">completedTransaction</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#cancelledtransaction" class="sidebar-link">cancelledTransaction</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#failedtransaction" class="sidebar-link">failedTransaction</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#erc20tokenbalancechanged" class="sidebar-link">erc20TokenBalanceChanged</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#erc20tokenfiatpricechanged" class="sidebar-link">erc20TokenFiatPriceChanged</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#ethbalancechanged" class="sidebar-link">ethBalanceChanged</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#ethfiatpricechanged" class="sidebar-link">ethFiatPriceChanged</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#changecurrency" class="sidebar-link">changeCurrency</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#iskycverified" class="sidebar-link">isKycVerified</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#kycprocesscancelled" class="sidebar-link">kycProcessCancelled</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#websocketconnected" class="sidebar-link">websocketConnected</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#websocketdisconnected" class="sidebar-link">websocketDisconnected</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#newblock" class="sidebar-link">newBlock</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#newblockbloommatchuser" class="sidebar-link">newBlockBloomMatchUser</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#playerprotectionupdated" class="sidebar-link">playerProtectionUpdated</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#wallettracking" class="sidebar-link">walletTracking</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#authenticationpopupclosed" class="sidebar-link">authenticationPopUpClosed</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#definitions" class="sidebar-link">Definitions:</a></li><li class="sidebar-sub-header"><a href="/guide/web-sdk/sdk-event-listeners.html#cancelling-event-listeners" class="sidebar-link">Cancelling event listeners</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="sdk-event-listeners"><a href="#sdk-event-listeners" class="header-anchor">#</a> SDK Event Listeners</h1> <p>The wallet emits events when properties change. For example, when the authenticated user changes their network - events help your app to keep in sync. You can hook onto the event listeners in the SDK, writing your own logic you want to fire when the event is emitted.</p> <p>You can only register 1 event listener per message listener, if you do try to listen to a listener which has already been registered it will throw a error. You can cancel listeners and you will be able to register them again without an error throwing.</p> <p>Once the SDK is initialised you should hook onto all the event listeners as each one is important within the integration. We recommend the callback you write for each message listener is just a simple state change to your redux store, which then allows your UI components to react to that state change. Reactive programming (rxjs) in this case will make the integration a lot nicer. The SDK itself doesn't have any hard limits on this though, so if you did want to integrate it another way then that's ok, the above is just our recommended integration approach for a clean solution.</p> <h2 id="register-an-event-listener"><a href="#register-an-event-listener" class="header-anchor">#</a> Register an event listener</h2> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'MESSAGE LISTENER NAME'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// logic here</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <p>Note: <code>TStronglyTypedResponse</code> is a reference to a strongly typed model - obviously don't use this in your application.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners<span class="token punctuation">,</span> TStronglyTypedResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>TStronglyTypedResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>TypeYouWantToUse<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> TStronglyTypedResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// logic here</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="listen-for-a-one-off-listener"><a href="#listen-for-a-one-off-listener" class="header-anchor">#</a> Listen for a one-off listener</h2> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">'MESSAGE LISTENER NAME'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// logic here</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners<span class="token punctuation">,</span> TStronglyTypedResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>once<span class="token operator">&lt;</span>TStronglyTypedResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>TypeYouWantToUse<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> TStronglyTypedResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// logic here</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>It will always have 1 parameter which is the result of the <code>postMessage</code> outcome:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  data<span class="token operator">:</span> TStronglyTypedResponse<span class="token punctuation">,</span>
  origin<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  source<span class="token operator">:</span> Window
<span class="token punctuation">}</span>
</code></pre></div><p><code>data</code>
The object passed from the other window.</p> <p><code>origin</code>
The origin of the window that sent the message at the time postMessage was called. This string is the concatenation of the protocol and &quot;😕/&quot;, the host name if one exists, and &quot;:&quot; followed by a port number if a port is present and differs from the default port for the given protocol. Examples of typical origins are https://example.org (implying port 443), http://example.net (implying port 80), and http://example.com:8080. Note that this origin is not guaranteed to be the current or future origin of that window, which might have been navigated to a different location since postMessage was called.</p> <p>In our examples we use a placeholder of <code>FUN_WALLET_ORIGIN</code> but yours should have the correct, valid origin for the wallet environment you're pointing to within your iframes.</p> <p><code>source</code>
A reference to the window object that sent the message; you can use this to establish two-way communication between two windows with different origins.</p> <h2 id="security-concerns"><a href="#security-concerns" class="header-anchor">#</a> Security concerns</h2> <p>Always verify the sender's identity using the origin and possibly source properties. Any window (including, for example, http://evil.example.com) can send a message to any other window, and you have no guarantees that an unknown sender will not send malicious messages. Having verified identity, however, you still should always verify the syntax of the received message. Otherwise, a security hole in the site you trusted to send only trusted messages could then open a cross-site scripting hole in your site.</p> <p>To protect yourself from opening yourself up to cross-site scripting, make sure you <strong>NEVER</strong> set the data result from the postMessage to any HTML elements:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">'MESSAGE LISTENER NAME'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// OUCH!! YOU HAVE OPENED YOURSELF UP FOR THE TRUSTED DOMAINS TO</span>
    <span class="token comment">// INJECT BAD SCRIPTS INTO YOUR PAGE, RULE OF THUMB NEVER EVER</span>
    <span class="token comment">// DO THIS (DON'T WORRY WE WOULD NEVER DO SOMETHING SO MEAN :D)</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> message<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Always specify an exact target origin, not &quot;*&quot;, when you use postMessage to send data to other windows. A malicious site can change the location of the window without your knowledge, and therefore it can intercept the data sent using postMessage.</p> <p>Please note the SDK does check this as well and only connects messages from the wallet but as the SDK is hosted on your side and exported globally on the window we suggest you check the origin as well. The messages the wallet sends you are just information based anyway, we never register a event which says &quot;go and execute this script on the parent site&quot; so this makes it a lot less to worry about but we still suggest you abide by the security concerns addressed. If you fail to check this you can not be sure that the message has came from the wallet.</p> <h2 id="all-listeners"><a href="#all-listeners" class="header-anchor">#</a> All listeners</h2> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  restoreAuthenticationCompleted <span class="token operator">=</span> <span class="token string">'restoreAuthenticationCompleted'</span><span class="token punctuation">,</span>
  changeNetwork <span class="token operator">=</span> <span class="token string">'changeNetwork'</span><span class="token punctuation">,</span>
  authenticationCompleted <span class="token operator">=</span> <span class="token string">'authenticationCompleted'</span><span class="token punctuation">,</span>
  followerAuthenticationCompleted <span class="token operator">=</span> <span class="token string">'followerAuthenticationCompleted'</span><span class="token punctuation">,</span>
  walletInactivityLoggedOut <span class="token operator">=</span> <span class="token string">'walletInactivityLoggedOut'</span><span class="token punctuation">,</span>
  walletDeviceDeletedLoggedOut <span class="token operator">=</span> <span class="token string">'walletDeviceDeletedLoggedOut'</span><span class="token punctuation">,</span>
  walletNonceUpdated <span class="token operator">=</span> <span class="token string">'walletNonceUpdated'</span><span class="token punctuation">,</span>
  pendingTransaction <span class="token operator">=</span> <span class="token string">'pendingTransaction'</span><span class="token punctuation">,</span>
  completedTransaction <span class="token operator">=</span> <span class="token string">'completedTransaction'</span><span class="token punctuation">,</span>
  cancelledTransaction <span class="token operator">=</span> <span class="token string">'cancelledTransaction'</span><span class="token punctuation">,</span>
  failedTransaction <span class="token operator">=</span> <span class="token string">'failedTransaction'</span><span class="token punctuation">,</span>
  erc20TokenBalanceChanged <span class="token operator">=</span> <span class="token string">'erc20TokenBalanceChanged'</span><span class="token punctuation">,</span>
  erc20TokenFiatPriceChanged <span class="token operator">=</span> <span class="token string">'erc20TokenFiatPriceChanged'</span><span class="token punctuation">,</span>
  ethBalanceChanged <span class="token operator">=</span> <span class="token string">'ethBalanceChanged'</span><span class="token punctuation">,</span>
  ethFiatPriceChanged <span class="token operator">=</span> <span class="token string">'ethFiatPriceChanged'</span><span class="token punctuation">,</span>
  changeCurrency <span class="token operator">=</span> <span class="token string">'changeCurrency'</span><span class="token punctuation">,</span>
  isKycVerified <span class="token operator">=</span> <span class="token string">'isKycVerified'</span><span class="token punctuation">,</span>
  kycProcessCancelled <span class="token operator">=</span> <span class="token string">'kycProcessCancelled'</span><span class="token punctuation">,</span>
  websocketConnected <span class="token operator">=</span> <span class="token string">'websocketConnected'</span><span class="token punctuation">,</span>
  websocketDisconnected <span class="token operator">=</span> <span class="token string">'websocketDisconnected'</span><span class="token punctuation">,</span>
  newBlock <span class="token operator">=</span> <span class="token string">'newBlock'</span><span class="token punctuation">,</span>
  newBlockBloomMatchUser <span class="token operator">=</span> <span class="token string">'newBlockBloomMatchUser'</span><span class="token punctuation">,</span>
  playerProtectionUpdated <span class="token operator">=</span> <span class="token string">'playerProtectionUpdated'</span><span class="token punctuation">,</span>
  walletTracking <span class="token operator">=</span> <span class="token string">'walletTracking'</span><span class="token punctuation">,</span>
  authenticationPopUpClosed <span class="token operator">=</span> <span class="token string">'authenticationPopUpClosed'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>All the examples of code here will use the <code>on</code> but remember on all of these cases you can use <code>once</code>.</p> <h2 id="restoreauthenticationcompleted"><a href="#restoreauthenticationcompleted" class="header-anchor">#</a> restoreAuthenticationCompleted</h2> <p>To allow restoring someone to be logged in after they refresh on initial load the wallet tries to restore a session, once done it will emit <code>restoreAuthenticationCompleted</code> telling you if its restored a users session or not. You should disable any sign in/up click button until you get this event, it should happen very fast.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'restoreAuthenticationCompleted'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  RestoreAuthenticationCompletedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>RestoreAuthenticationCompletedResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>restoreAuthenticationCompleted<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> RestoreAuthenticationCompletedResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  isAuthenticated<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="changenetwork"><a href="#changenetwork" class="header-anchor">#</a> changeNetwork</h2> <p>This will fire when the wallet network has been changed (This will fire on initial authentication of the leader as they do change state once authenticated).</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'changeNetwork'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners<span class="token punctuation">,</span> ChangeNetworkResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>ChangeNetworkResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>changeNetwork<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> ChangeNetworkResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  <span class="token comment">// defined above</span>
  network<span class="token operator">:</span> NetworkDetails<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="authenticationcompleted"><a href="#authenticationcompleted" class="header-anchor">#</a> authenticationCompleted</h2> <p>This will fire when the leader instance has been authenticated by a user, meaning you can now inject follower instances to show the UI to the authenticated user.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'authenticationCompleted'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  AuthenticationCompletedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>AuthenticationCompletedResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>authenticationCompleted<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> AuthenticationCompletedResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  authenticationCompleted<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="followerauthenticationcompleted"><a href="#followerauthenticationcompleted" class="header-anchor">#</a> followerAuthenticationCompleted</h2> <p>This will fire when the follower instance has authenticated itself successfully and is your notification to re-enable any disabled wallet buttons.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'followerAuthenticationCompleted'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  FollowerAuthenticationCompletedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>FollowerAuthenticationCompletedResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>followerAuthenticationCompleted<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> FollowerAuthenticationCompletedResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  followerAuthenticationCompleted<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="walletinactivityloggedout"><a href="#walletinactivityloggedout" class="header-anchor">#</a> walletInactivityLoggedOut</h2> <p>This will fire when the inactivity timeout has expired meaning all authenticated instances have now been logged out.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'walletInactivityLoggedOut'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  WalletInactivityLoggedOutResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>WalletInactivityLoggedOutResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>walletInactivityLoggedOut<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> WalletInactivityLoggedOutResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  loggedOut<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="walletdevicedeletedloggedout"><a href="#walletdevicedeletedloggedout" class="header-anchor">#</a> walletDeviceDeletedLoggedOut</h2> <p>This will fire when the current device the user is using has been deleted meaning all authenticated instances have now been logged out.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'walletDeviceDeletedLoggedOut'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  WalletInactivityLoggedOutResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>WalletDeviceDeletedLoggedOutResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>walletDeviceDeletedLoggedOut<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> WalletDeviceDeletedLoggedOutResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  loggedOut<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="walletnonceupdated"><a href="#walletnonceupdated" class="header-anchor">#</a> walletNonceUpdated</h2> <p>This will fire when the wallet nonce is updated.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'walletNonceUpdated'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  WalletNonceUpdatedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>WalletNonceUpdatedResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>walletNonceUpdated<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> WalletNonceUpdatedResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language- extra-class"><pre class="language-text"><code>{
  nonce: number,
}
</code></pre></div><hr> <h2 id="pendingtransaction"><a href="#pendingtransaction" class="header-anchor">#</a> pendingTransaction</h2> <p>This will fire when a pending transaction has occurred on the funwallet. We suggest if your app sends the transaction and wants to hook onto certain notifications, e.g. the transaction hash, then use the web3 promise events - https://web3js.readthedocs.io/en/1.0/callbacks-promises-events.html.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'pendingTransaction'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  PendingTransactionResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>PendingTransactionResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>pendingTransaction<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> PendingTransactionResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  transactionHash<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  transaction<span class="token operator">:</span> Transaction<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="completedtransaction"><a href="#completedtransaction" class="header-anchor">#</a> completedTransaction</h2> <p>This will fire when a completed transaction has occurred on the funwallet (1 confirmation). We do suggest if your app sends the transaction and wants to hook onto certain notifications, e.g the transaction hash, then use the web3 promise events.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'completedTransaction'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  CompletedTransactionResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>CompletedTransactionResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>completedTransaction<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> CompletedTransactionResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  transactionReceipt<span class="token operator">:</span> TransactionReceipt<span class="token punctuation">,</span>
  blockTimestamp<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="cancelledtransaction"><a href="#cancelledtransaction" class="header-anchor">#</a> cancelledTransaction</h2> <p>This will fire when a cancelled transaction has occurred on the funwallet.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'cancelledTransaction'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  CancelledTransactionResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>CancelledTransactionResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>cancelledTransaction<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> CancelledTransactionResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  transactionHash<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  transaction<span class="token operator">:</span> Transaction<span class="token punctuation">,</span>
  blockTimestamp<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="failedtransaction"><a href="#failedtransaction" class="header-anchor">#</a> failedTransaction</h2> <p>This will fire when a failed transaction has occurred on the funwallet (1 confirmation). We do suggest if your app sends the transaction and wants to hook onto certain notifications, e.g. the transaction hash, then use the web3 promise events.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'failedTransaction'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  FailedTransactionResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>FailedTransactionResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>failedTransaction<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> FailedTransactionResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  transactionHash<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="erc20tokenbalancechanged"><a href="#erc20tokenbalancechanged" class="header-anchor">#</a> erc20TokenBalanceChanged</h2> <p>This will fire when a ERC20 token balance changes for the authenticated user.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'erc20TokenBalanceChanged'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  ERC20TokenBalanceChangedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>ERC20TokenBalanceChangedResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>erc20TokenBalanceChanged<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> ERC20TokenBalanceChangedResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  <span class="token builtin">symbol</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token comment">// the balance is already formatted for you</span>
  <span class="token comment">// to the correct maximum decimal</span>
  tokenBalance<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="erc20tokenfiatpricechanged"><a href="#erc20tokenfiatpricechanged" class="header-anchor">#</a> erc20TokenFiatPriceChanged</h2> <p>This will fire when a ERC20 token fiat price changes.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'erc20TokenFiatPriceChanged'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  ERC20FiatPriceChangedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>ERC20FiatPriceChangedResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>erc20TokenFiatPriceChanged<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> ERC20FiatPriceChangedResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  <span class="token builtin">symbol</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  fiatPrice<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="ethbalancechanged"><a href="#ethbalancechanged" class="header-anchor">#</a> ethBalanceChanged</h2> <p>This will fire when the ETH balance changes for the authenticated user.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'ethBalanceChanged'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  ETHBalanceChangedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>ETHBalanceChangedResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>ethBalanceChanged<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> ETHBalanceChangedResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  <span class="token comment">// the balance is already formatted for you</span>
  <span class="token comment">// to the correct maximum decimal</span>
  ethBalance<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="ethfiatpricechanged"><a href="#ethfiatpricechanged" class="header-anchor">#</a> ethFiatPriceChanged</h2> <p>This will fire when an ETH fiat price changes.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'ethFiatPriceChanged'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  ETHFiatPriceChangedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>ETHFiatPriceChangedResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>ethFiatPriceChanged<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> ETHFiatPriceChangedResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  fiatPrice<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="changecurrency"><a href="#changecurrency" class="header-anchor">#</a> changeCurrency</h2> <p>This will fire when the authenticated user's selected currency has changed.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'changeCurrency'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners<span class="token punctuation">,</span> ChangeCurrencyResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>ChangeCurrencyResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>changeCurrency<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> ChangeCurrencyResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  currency<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="iskycverified"><a href="#iskycverified" class="header-anchor">#</a> isKycVerified</h2> <p>This will fire if the account is kyc verified or not. It will fire on the inital login allowing you to pop up the kyc modal automatically when a user logs in.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'isKycVerified'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  IsRegisteredThirdPartySignerResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>IsKycVerifiedResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>isKycVerified<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> IsKycVerifiedResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  isVerified<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="kycprocesscancelled"><a href="#kycprocesscancelled" class="header-anchor">#</a> kycProcessCancelled</h2> <p>This will fire when the authenticated account going through the kyc process cancels the modal and goes back to the casino website.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'kycProcessCancelled'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  IsRegisteredThirdPartySignerResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>KycProcessCancelledResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>kycProcessCancelled<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> KycProcessCancelledResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  cancelled<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="websocketconnected"><a href="#websocketconnected" class="header-anchor">#</a> websocketConnected</h2> <p>This will fire when the websocket connect successfully, please keep this in memory and when <code>websocketDisconnected</code> update the value of the websocket connection status, if it reconnects another one of these will fire.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'websocketConnected'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  WebsocketConnectedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>WebsocketConnectedResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>websocketConnected<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> WebsocketConnectedResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  connected<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="websocketdisconnected"><a href="#websocketdisconnected" class="header-anchor">#</a> websocketDisconnected</h2> <p>This will fire when the websocket disconnects or gets closed.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'websocketDisconnected'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  WebsocketDisconnectedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>WebsocketDisconnectedResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>websocketDisconnected<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> WebsocketDisconnectedResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  disconnected<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="newblock"><a href="#newblock" class="header-anchor">#</a> newBlock</h2> <p>This will fire when the wallet receives a new block alert through the websockets connection. This will remove any polling needed for the integration app and it can listen out for these to fire.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'newBlock'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners<span class="token punctuation">,</span> NewBlockResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>NewBlockResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>newBlock<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> NewBlockResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  networkId<span class="token operator">:</span> Networks<span class="token punctuation">;</span>
  blockNumber<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  blockHash<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  bloomFilter<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  timestamp<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="newblockbloommatchuser"><a href="#newblockbloommatchuser" class="header-anchor">#</a> newBlockBloomMatchUser</h2> <p>This will fire when the wallet receives a new block alert through the websockets its connect to and the bloom filter matches the authentication users ethereum address.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'newBlockBloomMatchUser'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  NewBlockBloomMatchUserResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>NewBlockBloomMatchUserResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>newBlockBloomMatchUser<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> NewBlockBloomMatchUserResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  networkId<span class="token operator">:</span> Networks<span class="token punctuation">;</span>
  blockNumber<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  blockHash<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  bloomFilter<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  timestamp<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="playerprotectionupdated"><a href="#playerprotectionupdated" class="header-anchor">#</a> playerProtectionUpdated</h2> <p>This will fire when the player protection data has been updated aka they just ban themselves or something.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'playerProtectionUpdated'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  PlayerProtectionUpdatedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>PlayerProtectionUpdatedResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>playerProtectionUpdated<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> PlayerProtectionUpdatedResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  status<span class="token operator">:</span> ExclusionStatusType<span class="token punctuation">;</span>
  startTimestamp<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  durationDays<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  activeTimestamp<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>ExclusionStatusType</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">enum</span> ExclusionStatusType <span class="token punctuation">{</span>
  <span class="token constant">ACTIVE</span> <span class="token operator">=</span> <span class="token string">'ACTIVE'</span><span class="token punctuation">,</span>
  <span class="token constant">ON_BREAK</span> <span class="token operator">=</span> <span class="token string">'ON_BREAK'</span><span class="token punctuation">,</span>
  <span class="token constant">EXCLUDED</span> <span class="token operator">=</span> <span class="token string">'EXCLUDED'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="wallettracking"><a href="#wallettracking" class="header-anchor">#</a> walletTracking</h2> <p>Due to the wallet holding your PK in memory we do not allow google analytics scripts in the wallet itself. This event emits tracking events back to the client so the integrator can pass them to any tracking software they want.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'walletTracking'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners<span class="token punctuation">,</span> WalletTrackingResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>WalletTrackingResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>walletTracking<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> WalletTrackingResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
    eventCategory<span class="token operator">:</span> TrackingEventCategory<span class="token punctuation">;</span>
    eventAction<span class="token operator">:</span> TrackingEventAction<span class="token punctuation">;</span>
    eventLabel<span class="token operator">?</span><span class="token operator">:</span> TrackingEventLabel <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    eventValue<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">enum</span> TrackingEventCategory <span class="token punctuation">{</span>
  walletRegistration <span class="token operator">=</span> <span class="token string">'walletRegistration'</span><span class="token punctuation">,</span>
  walletRecovery <span class="token operator">=</span> <span class="token string">'walletRecovery'</span><span class="token punctuation">,</span>
  wallet <span class="token operator">=</span> <span class="token string">'wallet'</span><span class="token punctuation">,</span>
  accountDeposit <span class="token operator">=</span> <span class="token string">'accountDeposit'</span><span class="token punctuation">,</span>
  accountWithdrawal <span class="token operator">=</span> <span class="token string">'accountWithdrawal'</span><span class="token punctuation">,</span>
  accountTokenTransfers <span class="token operator">=</span> <span class="token string">'accountTokenTransfers'</span><span class="token punctuation">,</span>
  accountTransactions <span class="token operator">=</span> <span class="token string">'accountTransactions'</span><span class="token punctuation">,</span>
  accountSettings <span class="token operator">=</span> <span class="token string">'accountSettings'</span><span class="token punctuation">,</span>
  accountSecurity <span class="token operator">=</span> <span class="token string">'accountSecurity'</span><span class="token punctuation">,</span>
  accountResponsibleGaming <span class="token operator">=</span> <span class="token string">'accountResponsibleGaming'</span><span class="token punctuation">,</span>
  approveTransaction <span class="token operator">=</span> <span class="token string">'approveTransaction'</span><span class="token punctuation">,</span>
  approveSigningText <span class="token operator">=</span> <span class="token string">'approveSigningText'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">enum</span> TrackingEventAction <span class="token punctuation">{</span>
  step <span class="token operator">=</span> <span class="token string">'step'</span><span class="token punctuation">,</span>
  click <span class="token operator">=</span> <span class="token string">'click'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">enum</span> TrackingEventLabel <span class="token punctuation">{</span>
  emailValidatingRequest <span class="token operator">=</span> <span class="token string">'emailValidatingRequest'</span><span class="token punctuation">,</span>
  resendEmail <span class="token operator">=</span> <span class="token string">'resendEmail'</span><span class="token punctuation">,</span>
  emailValidationComplete <span class="token operator">=</span> <span class="token string">'emailValidationComplete'</span><span class="token punctuation">,</span>
  backToSignIn <span class="token operator">=</span> <span class="token string">'backToSignIn'</span><span class="token punctuation">,</span>
  emailValidationFailed <span class="token operator">=</span> <span class="token string">'emailValidationFailed'</span><span class="token punctuation">,</span>
  closeAndReturnToCasino <span class="token operator">=</span> <span class="token string">'closeAndReturnToCasino'</span><span class="token punctuation">,</span>
  passwordSetup <span class="token operator">=</span> <span class="token string">'passwordSetup'</span><span class="token punctuation">,</span>
  registrationComplete <span class="token operator">=</span> <span class="token string">'registrationComplete'</span><span class="token punctuation">,</span>
  startKyc <span class="token operator">=</span> <span class="token string">'startKyc'</span><span class="token punctuation">,</span>
  closeKyc <span class="token operator">=</span> <span class="token string">'closeKyc'</span><span class="token punctuation">,</span>
  verifyMyId <span class="token operator">=</span> <span class="token string">'verifyMyId'</span><span class="token punctuation">,</span>
  selectCountry <span class="token operator">=</span> <span class="token string">'selectCountry'</span><span class="token punctuation">,</span>
  kycLoaded <span class="token operator">=</span> <span class="token string">'kycLoaded'</span><span class="token punctuation">,</span>
  kycCompleted <span class="token operator">=</span> <span class="token string">'kycCompleted'</span><span class="token punctuation">,</span>
  kycFailed <span class="token operator">=</span> <span class="token string">'kycFailed'</span><span class="token punctuation">,</span>
  kycFallbackLoaded <span class="token operator">=</span> <span class="token string">'kycFallbackLoaded'</span><span class="token punctuation">,</span>
  recoveryRequest <span class="token operator">=</span> <span class="token string">'recoveryRequest'</span><span class="token punctuation">,</span>
  noRecoveryPossible <span class="token operator">=</span> <span class="token string">'noRecoveryPossible'</span><span class="token punctuation">,</span>
  recoveryEmailSent <span class="token operator">=</span> <span class="token string">'recoveryEmailSent'</span><span class="token punctuation">,</span>
  recoveryEmailValidated <span class="token operator">=</span> <span class="token string">'recoveryEmailValidated'</span><span class="token punctuation">,</span>
  recoveryComplete <span class="token operator">=</span> <span class="token string">'recoveryComplete'</span><span class="token punctuation">,</span>
  createAccount <span class="token operator">=</span> <span class="token string">'createAccount'</span><span class="token punctuation">,</span>
  signIn <span class="token operator">=</span> <span class="token string">'signIn'</span><span class="token punctuation">,</span>
  signInFailed <span class="token operator">=</span> <span class="token string">'signInFailed'</span><span class="token punctuation">,</span>
  signInCompleted <span class="token operator">=</span> <span class="token string">'signInCompleted'</span><span class="token punctuation">,</span>
  forgotPassword <span class="token operator">=</span> <span class="token string">'forgotPassword'</span><span class="token punctuation">,</span>
  deposit <span class="token operator">=</span> <span class="token string">'deposit'</span><span class="token punctuation">,</span>
  ethOrFun <span class="token operator">=</span> <span class="token string">'ethOrFun'</span><span class="token punctuation">,</span>
  copyAddress <span class="token operator">=</span> <span class="token string">'copyAddress'</span><span class="token punctuation">,</span>
  coinSwap <span class="token operator">=</span> <span class="token string">'coinSwap'</span><span class="token punctuation">,</span>
  createdCoinSwap <span class="token operator">=</span> <span class="token string">'createdCoinSwap'</span><span class="token punctuation">,</span>
  withdrawal <span class="token operator">=</span> <span class="token string">'withdrawal'</span><span class="token punctuation">,</span>
  withdrawalMax <span class="token operator">=</span> <span class="token string">'withdrawalMax'</span><span class="token punctuation">,</span>
  withdrawalAdvanced <span class="token operator">=</span> <span class="token string">'widhtrawalAdvanced'</span><span class="token punctuation">,</span>
  withdrawalChangeGasPrice <span class="token operator">=</span> <span class="token string">'withdrawalChangeGasPrice'</span><span class="token punctuation">,</span>
  withdrawalClick <span class="token operator">=</span> <span class="token string">'withdrawalClick'</span><span class="token punctuation">,</span>
  withdrawalCompleted <span class="token operator">=</span> <span class="token string">'withdrawalCompleted'</span><span class="token punctuation">,</span>
  withdrawalFailed <span class="token operator">=</span> <span class="token string">'withdrawalFailed'</span><span class="token punctuation">,</span>
  withdrawalCancelled <span class="token operator">=</span> <span class="token string">'withdrawalCancelled'</span><span class="token punctuation">,</span>
  tokenTransfers <span class="token operator">=</span> <span class="token string">'tokenTransfers'</span><span class="token punctuation">,</span>
  tokenTransfersNext <span class="token operator">=</span> <span class="token string">'tokenTransfersNext'</span><span class="token punctuation">,</span>
  tokenTransfersPrevious <span class="token operator">=</span> <span class="token string">'tokenTransfersPrevious'</span><span class="token punctuation">,</span>
  transactions <span class="token operator">=</span> <span class="token string">'transactions'</span><span class="token punctuation">,</span>
  transactoinViewMoreInfo <span class="token operator">=</span> <span class="token string">'transactoinViewMoreInfo'</span><span class="token punctuation">,</span>
  transactionGoToEtherscan <span class="token operator">=</span> <span class="token string">'transactionGoToEtherscan'</span><span class="token punctuation">,</span>
  transactionSpeedUp <span class="token operator">=</span> <span class="token string">'transactionSpeedUp'</span><span class="token punctuation">,</span>
  transactionCancel <span class="token operator">=</span> <span class="token string">'transactionCancel'</span><span class="token punctuation">,</span>
  transactionsNext <span class="token operator">=</span> <span class="token string">'transactionsNext'</span><span class="token punctuation">,</span>
  transactionsPrevious <span class="token operator">=</span> <span class="token string">'transactionsPrevious'</span><span class="token punctuation">,</span>
  accountSettings <span class="token operator">=</span> <span class="token string">'accountSettings'</span><span class="token punctuation">,</span>
  networkChange <span class="token operator">=</span> <span class="token string">'networkChange'</span><span class="token punctuation">,</span>
  currencyChange <span class="token operator">=</span> <span class="token string">'currencyChange'</span><span class="token punctuation">,</span>
  signerChange <span class="token operator">=</span> <span class="token string">'signerChange'</span><span class="token punctuation">,</span>
  exportWallet <span class="token operator">=</span> <span class="token string">'exportWallet'</span><span class="token punctuation">,</span>
  accountSecurity <span class="token operator">=</span> <span class="token string">'accountSecurity'</span><span class="token punctuation">,</span>
  changeEmail <span class="token operator">=</span> <span class="token string">'changeEmail'</span><span class="token punctuation">,</span>
  changeEmailcompleted <span class="token operator">=</span> <span class="token string">'changeEmailcompleted'</span><span class="token punctuation">,</span>
  changePassword <span class="token operator">=</span> <span class="token string">'changePassword'</span><span class="token punctuation">,</span>
  changePasswordCompleted <span class="token operator">=</span> <span class="token string">'changePasswordCompleted'</span><span class="token punctuation">,</span>
  secondaryEmail <span class="token operator">=</span> <span class="token string">'secondaryEmail'</span><span class="token punctuation">,</span>
  secondaryEmailCompleted <span class="token operator">=</span> <span class="token string">'secondaryEmailCompleted'</span><span class="token punctuation">,</span>
  secondaryEmailDeleted <span class="token operator">=</span> <span class="token string">'secondaryEmailDeleted'</span><span class="token punctuation">,</span>
  twoFactorAuthentication <span class="token operator">=</span> <span class="token string">'twoFactorAuthentication'</span><span class="token punctuation">,</span>
  twoFactorAuthenticationEnabled <span class="token operator">=</span> <span class="token string">'twoFactorAuthenticationEnabled'</span><span class="token punctuation">,</span>
  twoFactorAuthenticationDisabled <span class="token operator">=</span> <span class="token string">'twoFactorAuthenticationDisabled'</span><span class="token punctuation">,</span>
  deviceActivity <span class="token operator">=</span> <span class="token string">'deviceActivity'</span><span class="token punctuation">,</span>
  deviceDeleted <span class="token operator">=</span> <span class="token string">'deviceDeleted'</span><span class="token punctuation">,</span>
  thirdPartySigners <span class="token operator">=</span> <span class="token string">'thirdPartySigners'</span><span class="token punctuation">,</span>
  thirdPartyAddSigner <span class="token operator">=</span> <span class="token string">'thirdPartyAddSigner'</span><span class="token punctuation">,</span>
  thirdPartyAddSignerCompleted <span class="token operator">=</span> <span class="token string">'thirdPartyAddSignerCompleted'</span><span class="token punctuation">,</span>
  thirdPartyAddSignerFailed <span class="token operator">=</span> <span class="token string">'thirdPartyAddSignerFailed'</span><span class="token punctuation">,</span>
  responsibleGaming <span class="token operator">=</span> <span class="token string">'responsibleGaming'</span><span class="token punctuation">,</span>
  takeABreak <span class="token operator">=</span> <span class="token string">'takeABreak'</span><span class="token punctuation">,</span>
  takeABreakClick <span class="token operator">=</span> <span class="token string">'takeABreakClick'</span><span class="token punctuation">,</span>
  takeABreakCompleted <span class="token operator">=</span> <span class="token string">'takeABreakCompleted'</span><span class="token punctuation">,</span>
  takeABreakCancelled <span class="token operator">=</span> <span class="token string">'takeABreakCancelled'</span><span class="token punctuation">,</span>
  extendBreak <span class="token operator">=</span> <span class="token string">'extendBreak'</span><span class="token punctuation">,</span>
  extendBreakClick <span class="token operator">=</span> <span class="token string">'extendBreakClick'</span><span class="token punctuation">,</span>
  extendBreakCompleted <span class="token operator">=</span> <span class="token string">'extendBreakCompleted'</span><span class="token punctuation">,</span>
  extendBreakFailed <span class="token operator">=</span> <span class="token string">'extendBreakFailed'</span><span class="token punctuation">,</span>
  extendBreakCancelled <span class="token operator">=</span> <span class="token string">'extendBreakCancelled'</span><span class="token punctuation">,</span>
  selfExcluse <span class="token operator">=</span> <span class="token string">'selfExcluse'</span><span class="token punctuation">,</span>
  selfExcluseCompleted <span class="token operator">=</span> <span class="token string">'selfExcluseCompleted'</span><span class="token punctuation">,</span>
  selfExcluseCancelled <span class="token operator">=</span> <span class="token string">'selfExcluseCancelled'</span><span class="token punctuation">,</span>
  reactivateAccountModal <span class="token operator">=</span> <span class="token string">'reactivateAccountModal'</span><span class="token punctuation">,</span>
  reactivateAccount <span class="token operator">=</span> <span class="token string">'reactivateAccount'</span><span class="token punctuation">,</span>
  approveTransaction <span class="token operator">=</span> <span class="token string">'approveTransaction'</span><span class="token punctuation">,</span>
  approveTransactionAdvanced <span class="token operator">=</span> <span class="token string">'approveTransactionAdvanced'</span><span class="token punctuation">,</span>
  approveTransactionApproved <span class="token operator">=</span> <span class="token string">'approveTransactionApproved'</span><span class="token punctuation">,</span>
  approveTransactionRejected <span class="token operator">=</span> <span class="token string">'approveTransactionRejected'</span><span class="token punctuation">,</span>
  approveSigningText <span class="token operator">=</span> <span class="token string">'approveSigningText'</span><span class="token punctuation">,</span>
  approveSigningTextApproved <span class="token operator">=</span> <span class="token string">'approveSigningTextApproved'</span><span class="token punctuation">,</span>
  approveSigningTextRejected <span class="token operator">=</span> <span class="token string">'approveSigningTextRejected'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="authenticationpopupclosed"><a href="#authenticationpopupclosed" class="header-anchor">#</a> authenticationPopUpClosed</h2> <p>This emits an event when the authentication popup is closed. If <code>isAuthenticated</code> is the response is true it means the close happened on a successful login, if it's false it means they did not go through the whole login and closed the popup.</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'authenticationPopUpClosed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  AuthenticationPopUpClosedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>AuthenticationPopUpClosedResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>authenticationPopUpClosed<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> AuthenticationPopUpClosedResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  isAuthenticated<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="definitions"><a href="#definitions" class="header-anchor">#</a> Definitions:</h2> <p><a href="https://github.com/ethereum/web3.js/blob/1.0/packages/web3-core/types/index.d.ts#L133" target="_blank" rel="noopener noreferrer">Transaction<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - now called <code>TransactionConfig</code> (I will change the data responses to reflect this when I get a chance).
<br> <a href="https://github.com/ethereum/web3.js/blob/1.0/packages/web3-core/types/index.d.ts#L137" target="_blank" rel="noopener noreferrer">TransactionReceipt<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <hr> <h2 id="cancelling-event-listeners"><a href="#cancelling-event-listeners" class="header-anchor">#</a> Cancelling event listeners</h2> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> listener <span class="token operator">=</span> window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'MESSAGE LISTENER NAME'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// cancel</span>
listener<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners<span class="token punctuation">,</span> TStronglyTypedResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> listener <span class="token operator">=</span> window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>on<span class="token operator">&lt;</span>TStronglyTypedResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>TypeYouWantToUse<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> TStronglyTypedResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// cancel</span>
listener<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>this works the same as <code>once</code>:</p> <p><code>JavaScript</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> listener <span class="token operator">=</span> funwalletsdk<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">'MESSAGE LISTENER NAME'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// cancel</span>
listener<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>TypeScript</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners<span class="token punctuation">,</span> TStronglyTypedResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair/wallet-sdk'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> listener <span class="token operator">=</span> window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>once<span class="token operator">&lt;</span>TStronglyTypedResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>TypeYouWantToUse<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result<span class="token operator">:</span> TStronglyTypedResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'FUN_WALLET_ORIGIN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// cancel</span>
listener<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Now if you try to listen to that message listener again it will work as you have cancelled the other listener. On the <code>once</code> calls once the <code>once</code> has been fired you will be able to register a new one without an error throwing.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/funfair-tech/fun-wallet-docs/edit/master/packages/docs/dist/guide/web-sdk/sdk-event-listeners.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/26/2020, 3:33:33 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/web-sdk/sdk-methods.html" class="prev">
        SDK Methods
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.6922d332.js" defer></script><script src="/assets/js/2.df3542b2.js" defer></script><script src="/assets/js/18.362a932c.js" defer></script><script src="/assets/js/5.4c5a6809.js" defer></script>
  </body>
</html>
